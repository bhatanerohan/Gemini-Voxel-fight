<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Voxel Arena - AI Weapons</title>
<link rel="stylesheet" href="/src/styles.css" />
</head>
<body>

<!-- Avatar Selection Screen -->
<div id="avatar-overlay" class="open">
  <div id="avatar-box">
    <h2>Describe Your Fighter</h2>
    <p id="avatar-subtitle">AI will generate a unique voxel avatar for you</p>
    <textarea id="avatar-input" placeholder="e.g. 'cyberpunk samurai', 'molten lava golem', 'ice witch with crystal armor'"></textarea>
    <div id="avatar-presets">
      <button class="avatar-preset" data-desc="neon cyber-ninja with electric blue visor">Cyber-Ninja</button>
      <button class="avatar-preset" data-desc="molten lava golem with cracked armor">Lava Golem</button>
      <button class="avatar-preset" data-desc="frost witch with ice crystal crown">Frost Witch</button>
      <button class="avatar-preset" data-desc="void shadow assassin, dark purple with glowing eyes">Shadow</button>
    </div>
    <button id="avatar-btn">Generate Fighter</button>
    <button id="avatar-skip">Skip â†’ Default Fighter</button>
    <div id="avatar-status"></div>
  </div>
</div>

<!-- Narrator Overlay -->
<div id="narrator-overlay" class="narrator-overlay"></div>

<div id="crosshair"></div>
<div id="weapon-name"></div>
<div id="player-level"></div>
<div id="avatar-skin-ui">
  <div class="skin-title">Avatar Skin</div>
  <div class="skin-row">
    <label for="player-skin-preset">Preset</label>
    <select id="player-skin-preset"></select>
  </div>
  <div class="skin-colors">
    <label>Suit <input type="color" id="player-skin-suit" value="#2f7dff" /></label>
    <label>Accent <input type="color" id="player-skin-accent" value="#9fe1ff" /></label>
    <label>Skin <input type="color" id="player-skin-tone" value="#f5d0b0" /></label>
    <label>Visor <input type="color" id="player-skin-visor" value="#0a2038" /></label>
  </div>
  <div class="skin-prompt-row">
    <input id="player-skin-prompt" type="text" placeholder="Type skin idea (e.g. batman)" />
    <button id="player-skin-apply" type="button">Apply</button>
  </div>
  <button id="player-skin-random" type="button">Randomize</button>
  <div class="narrator-tts-controls">
    <label class="narrator-tts-toggle">
      <input id="narrator-tts-enabled" type="checkbox" />
      Narrator Voice
    </label>
    <div class="narrator-tts-row">
      <select id="narrator-tts-voice" aria-label="Narrator voice"></select>
    </div>
    <div class="narrator-tts-row">
      <input id="narrator-tts-rate" type="range" min="0.75" max="1.30" step="0.05" value="1" />
      <span id="narrator-tts-rate-label">1.00x</span>
    </div>
  </div>
  <div id="player-skin-name"></div>
</div>

<!-- Game HUD -->
<div id="hud-top">
  <div id="wave-display">WAVE <span id="wave-num">1</span></div>
  <div id="score-display">SCORE <span id="score-num">0</span></div>
  <div id="kills-display">KILLS <span id="kills-num">0</span></div>
</div>
<div id="ai-balance-panel">
  <div class="ai-balance-head">
    <span>AI Balance</span>
    <span id="ai-balance-source">BASE</span>
  </div>
  <div class="ai-balance-line">Next Wave <span id="ai-balance-wave">1</span></div>
  <div id="ai-balance-summary">Baseline arena pressure</div>
  <div class="ai-balance-grid">
    <div>Spawn <span id="ai-balance-spawn">1.00x</span></div>
    <div>HP <span id="ai-balance-hp">1.00x</span></div>
    <div>Speed <span id="ai-balance-speed">1.00x</span></div>
    <div>Damage <span id="ai-balance-dmg">1.00x</span></div>
    <div>Cadence <span id="ai-balance-cd">1.00x</span></div>
  </div>
  <div class="ai-balance-pressure">
    <div id="ai-balance-pressure-fill"></div>
  </div>
</div>
<div id="codex-panel">
  <div class="codex-head">
    <span>Relic Codex</span>
    <span id="codex-progress-text">0%</span>
  </div>
  <div class="codex-progress">
    <div id="codex-progress-fill"></div>
  </div>
  <div id="codex-bonuses">Fire Rate +0% | Shield 0% | Weakness +0%</div>
  <div id="codex-active-decree">No decree selected for next wave.</div>
</div>

<!-- Center announcements -->
<div id="wave-announce"></div>
<div id="wave-clear-banner"></div>
<div id="hud-center-message"></div>
<div id="ai-balance-shift"></div>

<!-- Arena God Dialogue -->
<div id="arena-god">
  <div id="god-label">Arena God</div>
  <div id="god-portrait"></div>
  <div id="god-text"></div>
</div>

<div id="hud">WASD move | Mouse aim | Hold click fire | T forge weapon | 1-4 switch weapons | ESC settings</div>

<!-- Screen flash overlay -->
<div id="screen-flash"></div>

<!-- Weapon Slots -->
<div id="weapon-slots">
  <div class="weapon-slot active" data-slot="0"><span class="slot-key">1</span><span class="slot-name">Empty</span></div>
  <div class="weapon-slot" data-slot="1"><span class="slot-key">2</span><span class="slot-name">Empty</span></div>
  <div class="weapon-slot" data-slot="2"><span class="slot-key">3</span><span class="slot-name">Empty</span></div>
  <div class="weapon-slot" data-slot="3"><span class="slot-key">4</span><span class="slot-name">Empty</span></div>
</div>

<!-- Player Health Bar -->
<div id="player-health">
  <div id="player-health-fill"></div>
  <span id="player-health-text">100</span>
</div>

<!-- Settings Panel -->
<button id="settings-gear-btn" title="Settings (ESC)">&#9881;</button>
<div id="settings-overlay">
  <div id="settings-container">
    <div id="settings-tab-bar">
      <button class="settings-tab active" data-tab="themes"><span class="tab-icon">&#127912;</span><span class="tab-label">Themes</span></button>
      <button class="settings-tab" data-tab="weapons"><span class="tab-icon">&#9876;</span><span class="tab-label">Weapons</span></button>
      <button class="settings-tab" data-tab="skins"><span class="tab-icon">&#128100;</span><span class="tab-label">Skins</span></button>
      <button class="settings-tab" data-tab="avatars"><span class="tab-icon">&#129497;</span><span class="tab-label">Avatars</span></button>
      <button class="settings-tab" data-tab="graphics"><span class="tab-icon">&#128200;</span><span class="tab-label">Graphics</span></button>
    </div>
    <div id="settings-content"></div>
  </div>
  <div id="settings-toast"><span class="toast-text"></span><button class="toast-undo">Undo</button></div>
</div>

<!-- Weapon Forge -->
<div id="forge-overlay">
  <div id="forge-box">
    <h2>Weapon Forge</h2>
    <textarea id="forge-input" placeholder="Describe ANY weapon... e.g. 'a black hole cannon that sucks enemies in' or 'bouncing laser that splits on impact'"></textarea>
    <button id="forge-btn">Forge Weapon</button>
    <div id="forge-status"></div>
    <div id="forge-error"></div>
  </div>
</div>

<!-- Relic Intermission -->
<div id="intermission-overlay">
  <div id="intermission-box">
    <h2>Relic Drop</h2>
    <div id="intermission-wave"></div>
    <div id="intermission-relic-name"></div>
    <div id="intermission-relic-flavor"></div>
    <div class="intermission-actions">
      <button id="relic-decode-btn" type="button">Decode Relic</button>
      <button id="relic-skip-btn" type="button">Skip Decode</button>
    </div>
    <div id="intermission-relic-result"></div>
    <h3>AI Choice Moment</h3>
    <div id="intermission-decree-status">Fetching Gemini decrees...</div>
    <div id="intermission-decree-list"></div>
  </div>
</div>

<!-- Game Over Overlay -->
<div id="game-over-overlay">
  <div id="game-over-box">
    <h1>GAME OVER</h1>
    <p>Score: <span id="game-over-score">0</span></p>
    <div id="chronicle-container">
      <h2 id="chronicle-title"></h2>
      <div id="chronicle-text"></div>
      <p id="chronicle-moment"></p>
      <button id="chronicle-share-btn">Copy Chronicle</button>
    </div>
    <button id="restart-btn">Play Again</button>
  </div>
</div>

<script type="module" src="/src/main.js"></script>
</body>
</html>
